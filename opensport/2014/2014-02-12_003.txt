From 306031099904@xxx Tue Jun 16 00:17:23 +0000 2015
X-GM-THRID: 252823207936
X-Google-Groups: opensport
X-Google-Thread: 85742abb4e,91274d0de1d6fc38
X-Google-Attributes: gid85742abb4e,domainid0,public,googlegroup
X-Google-NewGroupId: yes
X-Received: by 10.42.63.68 with SMTP id b4mr2086559ici.21.1392236639172;
        Wed, 12 Feb 2014 12:23:59 -0800 (PST)
X-BeenThere: opensport@googlegroups.com
Received: by 10.140.102.244 with SMTP id w107ls3024859qge.26.gmail; Wed, 12
 Feb 2014 12:23:58 -0800 (PST)
X-Received: by 10.58.187.6 with SMTP id fo6mr1483311vec.34.1392236638863;
        Wed, 12 Feb 2014 12:23:58 -0800 (PST)
Return-Path: <gerald.bauer@gmail.com>
Received: from mail-vb0-x22f.google.com (mail-vb0-x22f.google.com [2607:f8b0:400c:c02::22f])
        by gmr-mx.google.com with ESMTPS id c1si5121484vdv.0.2014.02.12.12.23.58
        for <opensport@googlegroups.com>
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 12 Feb 2014 12:23:58 -0800 (PST)
Received-SPF: pass (google.com: domain of gerald.bauer@gmail.com designates 2607:f8b0:400c:c02::22f as permitted sender) client-ip=2607:f8b0:400c:c02::22f;
Authentication-Results: gmr-mx.google.com;
       spf=pass (google.com: domain of gerald.bauer@gmail.com designates 2607:f8b0:400c:c02::22f as permitted sender) smtp.mail=gerald.bauer@gmail.com;
       dkim=pass header.i=@gmail.com;
       dmarc=pass (p=NONE dis=NONE) header.from=gmail.com
Received: by mail-vb0-x22f.google.com with SMTP id p6so7329170vbe.20
        for <opensport@googlegroups.com>; Wed, 12 Feb 2014 12:23:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=cgJcsurwlegcsyLt1tsQzcdKz1kPApYisVSg1bqjHy8=;
        b=MTbVs9df5AF1Q7XqXHlAJJwF9EvTI6vxfffNMElt39dL+LNBwHP1X9QiMxJ4WNf1yp
         fNJ77rGXR7d5QSbZOzuBXi05klNnwrSDCXAdEczXNkK3coycBnpQap5AciaZEaDD96PK
         OVrVb4OLrANnU0SwQYgRTTKX9T0Ba+TfIax5PnNtJoPCYJ4Id7DnUBwCHvp7/Ay3mFFu
         BusLRzei6iBBrlhSA8EtqELVbmpOernpMVYXMDgLqjdIkNyksq03OEsTik2FmDyqQKM8
         Is2CcJlmDBuaVYNxnfazfzbL2fYuIYvbSu8EUb+5RSRoA0YHda50Gw/aVFGgbQs+dI5E
         7DhA==
MIME-Version: 1.0
X-Received: by 10.58.172.132 with SMTP id bc4mr663249vec.45.1392236638732;
 Wed, 12 Feb 2014 12:23:58 -0800 (PST)
Received: by 10.58.156.10 with HTTP; Wed, 12 Feb 2014 12:23:58 -0800 (PST)
In-Reply-To: <CAAxEZd8SAXOBaNFDtKFuBeftKEpmDwQ8_fTvohLQP5HzQ8K7iQ@mail.gmail.com>
References: <d7f4432d-8234-4fe2-9d86-ddb1405fa163@googlegroups.com>
	<36cce30c-d387-437b-880a-54f9d3f654ea@googlegroups.com>
	<51f35b75-76da-4986-aee3-028b39c390a5@googlegroups.com>
	<CAAxEZd-Bwo6-1OSj_JU0pCzTGqskxx8BWZKk2R3WirEw9c60Rg@mail.gmail.com>
	<6622adba-9c9b-4c7f-be0e-2523db79734d@googlegroups.com>
	<92623206-3be0-40ec-a654-8c4e9dcc9e3c@googlegroups.com>
	<CAAxEZd8SAXOBaNFDtKFuBeftKEpmDwQ8_fTvohLQP5HzQ8K7iQ@mail.gmail.com>
Date: Wed, 12 Feb 2014 14:23:58 -0600
Message-ID: <CAAxEZd-d+B8-tXGAF4Dgu+j0sOXYS6OvSO0towTyZkh0CbUiRg@mail.gmail.com>
Subject: Re: [opensport] Re: A couple of questions...
From: Gerald Bauer <gerald.bauer@gmail.com>
To: opensport@googlegroups.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,

  I've added a new ground (stadium) tables plus associations for games
and events (that is, a game belongs to a ground and a ground has many
games; an event has many grounds using the events_ground join table).

  If you update the sportdb gem (requires 1.8.2+) and the textutils
gem (requires + 0.8.4+) plus use the stadiums repo and rebuild your
schema and fixtures you can access the city for the game using

    game.ground.city, for example.

   Let me know if it works. Cheers.

 PS: I've only added the stadiums/grounds for now to the world cup
2014 fixtures [1].  Also note some games miss the stadiums (you're
welcome to add the missing stadiums/grounds).

[1]  github.com/openfootball/world-cup/blob/master/2014/cup.txt

2014-02-05 13:58 GMT-06:00 Gerald Bauer <gerald.bauer@gmail.com>:
> Hello Oriol,
>
>>  I had a look on the entire generated DB and I couldn't see any relation=
ship between games
>>  and where are the played (cities). Am I wrong?
>
>   I'm sorry, you're not. It's currently missing.
>
>>  Could be consider to add the locations for all World Cup games?
>>  Let me know if I could help you on this!
>
>   The good news it's planned to add a location via stadiums (see [1]
> ). All stadiums for the world cup in Brazil are already included.  The
> bad news it will realistically take a couple of weeks until I get
> around adding the missing code.  Of course, you're more than welcome
> to start adding the missing parts yourself. Thanks for your patience.
>
>   Cheers.
>
> [1] https://github.com/openfootball/stadiums/blob/master/south-america/br=
-brazil/stadiums.txt
>
> 2014-02-05 Oriol Franquesa Cort=E9s <ofranquesa@gmail.com>:
>> Sorry Gerald, it's me again! :)
>>
>> Just one question. I realised that games have no "city" related... I had=
 a
>> look on the entire generated DB and I couldn't see any relationship betw=
een
>> games and where are the played (cities). Am I wrong? Could be consider t=
o
>> add the locations for all World Cup games? Let me know if I could help y=
ou
>> on this!
>>
>> Best,
>> Oriol.
>>
>>
>> On Friday, January 31, 2014 5:20:24 PM UTC+1, Oriol Franquesa Cort=E9s w=
rote:
>>>
>>> Hi Gerald!
>>>
>>> Many thanks! Now worked like a charm! :)
>>>
>>> Best.
>>>
>>> On Friday, January 31, 2014 2:41:16 PM UTC+1, Gerald Bauer wrote:
>>>>
>>>> Hello,
>>>>
>>>>    Sorry for the error and thanks for trying. Please, update the
>>>> sportdb gem to use the latest version, that is, 1.8.0 and retry. It
>>>> should work now.
>>>>
>>>>   Note, you will have to fix (update) your Rakefile too. You will need
>>>> to import the
>>>>   1) builtins (e.g. seasons) and
>>>>   2) all national teams using the euro-cup, africa-cup,
>>>> north-america-gold-cup n copa-america repos
>>>>
>>>>   Add to/change in your Rakefile:
>>>>
>>>> task :importbuiltin =3D> :env do
>>>>   SportDb.read_builtin
>>>> end
>>>>
>>>> task :importsport =3D> :importbuiltin do
>>>>   SportDb.read_setup( 'setups/teams', './euro-cup' )
>>>>   SportDb.read_setup( 'setups/teams', './africa-cup' )
>>>>   SportDb.read_setup( 'setups/teams', './north-america-gold-cup' )
>>>>   SportDb.read_setup( 'setups/teams', './copa-america' )
>>>>   SportDb.read_setup( 'setups/all',   './world-cup' )
>>>> end
>>>>
>>>> And that's it. Retry and it now should work. Optional: Add the about
>>>> task to check the gem versions e.g.:
>>>>
>>>> desc 'footballdb - check gem versions in use'
>>>> task :about =3D> :env do
>>>>   puts "textutils #{TextUtils::VERSION}"
>>>>   puts "worlddb #{WorldDb::VERSION}"
>>>>   puts "sportdb #{SportDb::VERSION}"
>>>> end
>>>>
>>>> Let me know if it works. Cheers.
>>>>
>>>> 2014-01-30 Oriol Franquesa Cort=E9s <ofran...@gmail.com>:
>>>> > Hi Gerald!
>>>> >
>>>> > Thanks a lot for your quick answer! :)
>>>> >
>>>> > Almost everything is clear now...
>>>> >
>>>> > I just wanted to know if there is some error on the files or with th=
e
>>>> > parsers. I made a Rakefile to create my world cup database but there=
's
>>>> > no
>>>> > manner to parse the world-cup files. This is my Rakefile:
>>>> >
>>>> > BUILD_DIR =3D "."
>>>> >
>>>> > FOOTBALL_DB_PATH =3D "#{BUILD_DIR}/football.db"
>>>> >
>>>> > DB_CONFIG =3D {
>>>> >   :adapter   =3D>  'mysql2',
>>>> >   :database  =3D>  'football',
>>>> >   :username  =3D>  'root',
>>>> >   :password  =3D>  'test'
>>>> > }
>>>> >
>>>> >
>>>> >
>>>> > directory BUILD_DIR
>>>> >
>>>> > task :clean do
>>>> >   rm FOOTBALL_DB_PATH if File.exists?( FOOTBALL_DB_PATH )
>>>> > end
>>>> >
>>>> > task :env =3D> BUILD_DIR do
>>>> >  require 'worlddb'
>>>> >  require 'sportdb'
>>>> >  require 'logutils/db'
>>>> >
>>>> >  LogUtils::Logger.root.level =3D :info
>>>> >
>>>> >  pp DB_CONFIG
>>>> >  ActiveRecord::Base.establish_connection( DB_CONFIG )
>>>> > end
>>>> >
>>>> > task :create =3D> :env do
>>>> >   LogDb.create
>>>> >   WorldDb.create
>>>> >   SportDb.create
>>>> > end
>>>> >
>>>> > task :importworld =3D> :env do
>>>> >   WorldDb.read_setup( 'setups/sport.db.admin', './world.db', skip_ta=
gs:
>>>> > true
>>>> > )  # populate world tables
>>>> >   # WorldDb.stats
>>>> > end
>>>> >
>>>> > task :importsport =3D> :env do
>>>> >   SportDb.read_setup( 'setups/all', './world-cup' )
>>>> >   # SportDb.stats
>>>> > end
>>>> >
>>>> > desc 'footballdb - build from scratch'
>>>> > task :build =3D> [:clean, :create, :importworld, :importsport] do
>>>> >   puts 'Done.'
>>>> > end
>>>> >
>>>> > And this is what I get:
>>>> >
>>>> > root@orioldebian:/var/www/sportsdb# rake --trace importsport
>>>> > ** Invoke importsport (first_time)
>>>> > ** Invoke env (first_time)
>>>> > ** Invoke . (first_time, not_needed)
>>>> > ** Execute env
>>>> > worlddb 1.8.2 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
>>>> > fetcher 0.4.2 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
>>>> > sportdb/1.7.9 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
>>>> > logdb 0.6.0 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
>>>> > {:adapter=3D>"mysql2",
>>>> >  :database=3D>"football",
>>>> >  :username=3D>"root",
>>>> >  :password=3D>"helliwood"}
>>>> > ** Execute importsport
>>>> > [info] parsing data 'setups/all' (./world-cup/setups/all.yml)...
>>>> > rake aborted!
>>>> > wrong number of arguments (3 for 2)
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/worlddb-1.8.2/lib/worlddb/matche=
r.rb:7:in
>>>> > `match_xxx_for_country'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader=
.rb:18:in
>>>> > `match_tracks_for_country'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader=
.rb:64:in
>>>> > `load'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader=
.rb:53:in
>>>> > `block in load_setup'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/textutils-0.8.1/lib/textutils/re=
ader/fixture_reader.rb:44:in
>>>> > `block in each'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/textutils-0.8.1/lib/textutils/re=
ader/fixture_reader.rb:43:in
>>>> > `each'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/textutils-0.8.1/lib/textutils/re=
ader/fixture_reader.rb:43:in
>>>> > `each'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader=
.rb:52:in
>>>> > `load_setup'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb.rb:122=
:in
>>>> > `read_setup'
>>>> > /mnt/hgfs/httdocs/sportsdb/Rakefile:43:in `block in <top (required)>=
'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:236=
:in
>>>> > `call'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:236=
:in
>>>> > `block in execute'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:231=
:in
>>>> > `each'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:231=
:in
>>>> > `execute'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:175=
:in
>>>> > `block in invoke_with_call_chain'
>>>> > /usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/monitor.rb:211:in
>>>> > `mon_synchronize'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:168=
:in
>>>> > `invoke_with_call_chain'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:161=
:in
>>>> > `invoke'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:149:in
>>>> > `invoke_task'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:106:in
>>>> > `block (2 levels) in top_level'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:106:in
>>>> > `each'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:106:in
>>>> > `block in top_level'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:115:in
>>>> > `run_with_threads'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:100:in
>>>> > `top_level'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:78:in
>>>> > `block in run'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:165:in
>>>> > `standard_exception_handling'
>>>> >
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application=
.rb:75:in
>>>> > `run'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/bin/rake:33:in `<top
>>>> > (required)>'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/bin/rake:23:in `load'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/bin/rake:23:in `<main>'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `eval=
'
>>>> > /usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `<mai=
n>'
>>>> > Tasks: TOP =3D> importsport
>>>> >
>>>> >
>>>> > Any help would be much appreciated! :)
>>>> >
>>>> > Oriol.
>>>> >
>>>> >
>>>> > On Wednesday, January 29, 2014 9:57:13 PM UTC+1, Gerald Bauer wrote:
>>>> >>
>>>> >> Hello,
>>>> >>
>>>> >>> 1 - As another user asked before, how are the data maintained? I
>>>> >>> mean,
>>>> >>> when are you gonna update a result after the match is played? (An
>>>> >>> example)
>>>> >>
>>>> >>
>>>> >>     The match data is a plain text file residing on GitHub. For
>>>> >> example,
>>>> >> the match data for the World Cup 2014 in Brazil lives @
>>>> >> github.com/openfootball/world-cup/blob/master/2014/cup.txt
>>>> >>
>>>> >>    Basically, it works like a wiki - anybody can update it (if you'=
re
>>>> >> a
>>>> >> openfootball team member - you can update it directly; otherwise yo=
u
>>>> >> may use
>>>> >> a pull request).   It's an all volunteer effort, thus, there is no
>>>> >> guarantee
>>>> >> for updates. In practice I plan to update the World Cup 2014 at lea=
st
>>>> >> once a
>>>> >> day (since I plan to use the results for sportbook).
>>>> >>
>>>> >>    Once the results got updated on GitHub - you can sync your app v=
ia
>>>> >> the
>>>> >> built in machinery of the sportdb gem (basically just call
>>>> >> SportDb.update! )
>>>> >> or use the public HTTP JSON API that gets for now updated once a da=
y
>>>> >> (that
>>>> >> is, every 24 hours).
>>>> >>
>>>> >>>
>>>> >>>
>>>> >>> 2 - Which data is included for a result? (Who scored the goals?)
>>>> >>
>>>> >>
>>>> >>    For now only the results e.g.   Italy 3-0 Spain   etc.
>>>> >> . Again see the plain text fixtures files, for an example. Goals
>>>> >> scored by
>>>> >> players will get added later.
>>>> >>
>>>> >>>
>>>> >>> 3 - I don't know where can I find all the possible available URLs =
for
>>>> >>> the
>>>> >>> web service.
>>>> >>
>>>> >>
>>>> >>    Sorry, the docu page for the web service is currently down [1], =
it
>>>> >> resides @ footballdb.herokuapp.com/api   but the service is working=
.
>>>> >> Example:
>>>> >>
>>>> >>   - Get the teams for the World Cup 2014 ->
>>>> >> footballdb.herokuapp.com/api/v1/event/world.2014/teams
>>>> >>   - Get all rounds ->
>>>> >> footballdb.herokuapp.com/api/v1/event/world.2014/rounds
>>>> >>   - Get 1st round games ->
>>>> >> footballdb.herokuapp.com/api/v1/event/world.2014/round/1
>>>> >>   - etc.
>>>> >>
>>>> >>   Cheers.
>>>> >>
>>>> >> [1] The docu source page for the HTTP JSON API resides @
>>>> >>
>>>> >> github.com/geraldb/sport.db.ruby/blob/master/lib/sportdb/service/vi=
ews/index.erb
>>>> >
>>>> > --
>>>> > You received this message because you are subscribed to the Google
>>>> > Groups
>>>> > "Open Sport(s) Database - football.db, formula1.db, ski.db, and
>>>> > Friends"
>>>> > group.
>>>> > To unsubscribe from this group and stop receiving emails from it, se=
nd
>>>> > an
>>>> > email to opensport+...@googlegroups.com.
>>>> > For more options, visit https://groups.google.com/groups/opt_out.
>>
>> --
>> You received this message because you are subscribed to the Google Group=
s
>> "Open Sport(s) Database - football.db, formula1.db, ski.db, and Friends"
>> group.
>> To unsubscribe from this group and stop receiving emails from it, send a=
n
>> email to opensport+unsubscribe@googlegroups.com.
>> For more options, visit https://groups.google.com/groups/opt_out.

