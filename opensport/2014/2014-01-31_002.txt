From 262270877696@xxx Tue Jun 16 00:17:23 +0000 2015
X-GM-THRID: 252823207936
X-Google-Groups: opensport
X-Google-Thread: 85742abb4e,91274d0de1d6fc38
X-Google-Attributes: gid85742abb4e,domainid0,public,googlegroup
X-Google-NewGroupId: yes
X-Received: by 10.68.201.7 with SMTP id jw7mr7757549pbc.8.1391175677143;
        Fri, 31 Jan 2014 05:41:17 -0800 (PST)
X-BeenThere: opensport@googlegroups.com
Received: by 10.140.50.5 with SMTP id r5ls962904qga.22.gmail; Fri, 31 Jan 2014
 05:41:16 -0800 (PST)
X-Received: by 10.224.121.70 with SMTP id g6mr7168908qar.1.1391175676952;
        Fri, 31 Jan 2014 05:41:16 -0800 (PST)
Return-Path: <gerald.bauer@gmail.com>
Received: from mail-ve0-x230.google.com (mail-ve0-x230.google.com [2607:f8b0:400c:c01::230])
        by gmr-mx.google.com with ESMTPS id c1si2312252vdv.0.2014.01.31.05.41.16
        for <opensport@googlegroups.com>
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Fri, 31 Jan 2014 05:41:16 -0800 (PST)
Received-SPF: pass (google.com: domain of gerald.bauer@gmail.com designates 2607:f8b0:400c:c01::230 as permitted sender) client-ip=2607:f8b0:400c:c01::230;
Authentication-Results: gmr-mx.google.com;
       spf=pass (google.com: domain of gerald.bauer@gmail.com designates 2607:f8b0:400c:c01::230 as permitted sender) smtp.mail=gerald.bauer@gmail.com;
       dkim=pass header.i=@gmail.com;
       dmarc=pass (p=NONE dis=NONE) header.from=gmail.com
Received: by mail-ve0-f176.google.com with SMTP id oz11so3037442veb.7
        for <opensport@googlegroups.com>; Fri, 31 Jan 2014 05:41:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=G2D9xxf2stPfvfie5MJbNiUyFBi1P47FitVazaD9biY=;
        b=ihQR7oAOmkI4ed87sAHl1xZ7MToBkJYcIjrD+9kLiywML8UtJCZpmtLezbPcVcxFkQ
         HZklr21wxXzGoFBCV0OzHLNiGwe0ChJU28l5z0uqqBzOZcyavpt5Z0VVGTy7pQG1bmBB
         F9wyGvVS92jm5fWDTI/77MAPasmNXla4ZLwl4/2rFv4XNu7rAAOdig/PE3y1plILiBK/
         eUrG9Zp1NFFNxoE0+en3mgYVQ33sjkB7+IK22F+CWrUjRrjBZsPnh3LPYW20LVOtu7LW
         qp5n8ZO78R2u95qFTq4RAIOtmYFWUKKaPAXU8AJIeZzJHXSnosgSr8Jvx8L7nyTfWx20
         GCLw==
MIME-Version: 1.0
X-Received: by 10.58.229.164 with SMTP id sr4mr15562794vec.18.1391175676367;
 Fri, 31 Jan 2014 05:41:16 -0800 (PST)
Received: by 10.58.107.198 with HTTP; Fri, 31 Jan 2014 05:41:16 -0800 (PST)
In-Reply-To: <51f35b75-76da-4986-aee3-028b39c390a5@googlegroups.com>
References: <d7f4432d-8234-4fe2-9d86-ddb1405fa163@googlegroups.com>
	<36cce30c-d387-437b-880a-54f9d3f654ea@googlegroups.com>
	<51f35b75-76da-4986-aee3-028b39c390a5@googlegroups.com>
Date: Fri, 31 Jan 2014 07:41:16 -0600
Message-ID: <CAAxEZd-Bwo6-1OSj_JU0pCzTGqskxx8BWZKk2R3WirEw9c60Rg@mail.gmail.com>
Subject: Re: [opensport] Re: A couple of questions...
From: Gerald Bauer <gerald.bauer@gmail.com>
To: opensport@googlegroups.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,

   Sorry for the error and thanks for trying. Please, update the
sportdb gem to use the latest version, that is, 1.8.0 and retry. It
should work now.

  Note, you will have to fix (update) your Rakefile too. You will need
to import the
  1) builtins (e.g. seasons) and
  2) all national teams using the euro-cup, africa-cup,
north-america-gold-cup n copa-america repos

  Add to/change in your Rakefile:

task :importbuiltin =3D> :env do
  SportDb.read_builtin
end

task :importsport =3D> :importbuiltin do
  SportDb.read_setup( 'setups/teams', './euro-cup' )
  SportDb.read_setup( 'setups/teams', './africa-cup' )
  SportDb.read_setup( 'setups/teams', './north-america-gold-cup' )
  SportDb.read_setup( 'setups/teams', './copa-america' )
  SportDb.read_setup( 'setups/all',   './world-cup' )
end

And that's it. Retry and it now should work. Optional: Add the about
task to check the gem versions e.g.:

desc 'footballdb - check gem versions in use'
task :about =3D> :env do
  puts "textutils #{TextUtils::VERSION}"
  puts "worlddb #{WorldDb::VERSION}"
  puts "sportdb #{SportDb::VERSION}"
end

Let me know if it works. Cheers.

2014-01-30 Oriol Franquesa Cort=E9s <ofranquesa@gmail.com>:
> Hi Gerald!
>
> Thanks a lot for your quick answer! :)
>
> Almost everything is clear now...
>
> I just wanted to know if there is some error on the files or with the
> parsers. I made a Rakefile to create my world cup database but there's no
> manner to parse the world-cup files. This is my Rakefile:
>
> BUILD_DIR =3D "."
>
> FOOTBALL_DB_PATH =3D "#{BUILD_DIR}/football.db"
>
> DB_CONFIG =3D {
>   :adapter   =3D>  'mysql2',
>   :database  =3D>  'football',
>   :username  =3D>  'root',
>   :password  =3D>  'test'
> }
>
>
>
> directory BUILD_DIR
>
> task :clean do
>   rm FOOTBALL_DB_PATH if File.exists?( FOOTBALL_DB_PATH )
> end
>
> task :env =3D> BUILD_DIR do
>  require 'worlddb'
>  require 'sportdb'
>  require 'logutils/db'
>
>  LogUtils::Logger.root.level =3D :info
>
>  pp DB_CONFIG
>  ActiveRecord::Base.establish_connection( DB_CONFIG )
> end
>
> task :create =3D> :env do
>   LogDb.create
>   WorldDb.create
>   SportDb.create
> end
>
> task :importworld =3D> :env do
>   WorldDb.read_setup( 'setups/sport.db.admin', './world.db', skip_tags: t=
rue
> )  # populate world tables
>   # WorldDb.stats
> end
>
> task :importsport =3D> :env do
>   SportDb.read_setup( 'setups/all', './world-cup' )
>   # SportDb.stats
> end
>
> desc 'footballdb - build from scratch'
> task :build =3D> [:clean, :create, :importworld, :importsport] do
>   puts 'Done.'
> end
>
> And this is what I get:
>
> root@orioldebian:/var/www/sportsdb# rake --trace importsport
> ** Invoke importsport (first_time)
> ** Invoke env (first_time)
> ** Invoke . (first_time, not_needed)
> ** Execute env
> worlddb 1.8.2 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
> fetcher 0.4.2 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
> sportdb/1.7.9 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
> logdb 0.6.0 on Ruby 2.1.0 (2013-12-25) [x86_64-linux]
> {:adapter=3D>"mysql2",
>  :database=3D>"football",
>  :username=3D>"root",
>  :password=3D>"helliwood"}
> ** Execute importsport
> [info] parsing data 'setups/all' (./world-cup/setups/all.yml)...
> rake aborted!
> wrong number of arguments (3 for 2)
> /usr/local/rvm/gems/ruby-2.1.0/gems/worlddb-1.8.2/lib/worlddb/matcher.rb:=
7:in
> `match_xxx_for_country'
> /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader.rb:1=
8:in
> `match_tracks_for_country'
> /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader.rb:6=
4:in
> `load'
> /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader.rb:5=
3:in
> `block in load_setup'
> /usr/local/rvm/gems/ruby-2.1.0/gems/textutils-0.8.1/lib/textutils/reader/=
fixture_reader.rb:44:in
> `block in each'
> /usr/local/rvm/gems/ruby-2.1.0/gems/textutils-0.8.1/lib/textutils/reader/=
fixture_reader.rb:43:in
> `each'
> /usr/local/rvm/gems/ruby-2.1.0/gems/textutils-0.8.1/lib/textutils/reader/=
fixture_reader.rb:43:in
> `each'
> /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb/reader.rb:5=
2:in
> `load_setup'
> /usr/local/rvm/gems/ruby-2.1.0/gems/sportdb-1.7.9/lib/sportdb.rb:122:in
> `read_setup'
> /mnt/hgfs/httdocs/sportsdb/Rakefile:43:in `block in <top (required)>'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:236:in
> `call'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:236:in
> `block in execute'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:231:in
> `each'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:231:in
> `execute'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:175:in
> `block in invoke_with_call_chain'
> /usr/local/rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/monitor.rb:211:in
> `mon_synchronize'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:168:in
> `invoke_with_call_chain'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/task.rb:161:in
> `invoke'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:1=
49:in
> `invoke_task'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:1=
06:in
> `block (2 levels) in top_level'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:1=
06:in
> `each'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:1=
06:in
> `block in top_level'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:1=
15:in
> `run_with_threads'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:1=
00:in
> `top_level'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:7=
8:in
> `block in run'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:1=
65:in
> `standard_exception_handling'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:7=
5:in
> `run'
> /usr/local/rvm/gems/ruby-2.1.0/gems/rake-10.1.1/bin/rake:33:in `<top
> (required)>'
> /usr/local/rvm/gems/ruby-2.1.0/bin/rake:23:in `load'
> /usr/local/rvm/gems/ruby-2.1.0/bin/rake:23:in `<main>'
> /usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `eval'
> /usr/local/rvm/gems/ruby-2.1.0/bin/ruby_executable_hooks:15:in `<main>'
> Tasks: TOP =3D> importsport
>
>
> Any help would be much appreciated! :)
>
> Oriol.
>
>
> On Wednesday, January 29, 2014 9:57:13 PM UTC+1, Gerald Bauer wrote:
>>
>> Hello,
>>
>>> 1 - As another user asked before, how are the data maintained? I mean,
>>> when are you gonna update a result after the match is played? (An examp=
le)
>>
>>
>>     The match data is a plain text file residing on GitHub. For example,
>> the match data for the World Cup 2014 in Brazil lives @
>> github.com/openfootball/world-cup/blob/master/2014/cup.txt
>>
>>    Basically, it works like a wiki - anybody can update it (if you're a
>> openfootball team member - you can update it directly; otherwise you may=
 use
>> a pull request).   It's an all volunteer effort, thus, there is no guara=
ntee
>> for updates. In practice I plan to update the World Cup 2014 at least on=
ce a
>> day (since I plan to use the results for sportbook).
>>
>>    Once the results got updated on GitHub - you can sync your app via th=
e
>> built in machinery of the sportdb gem (basically just call SportDb.updat=
e! )
>> or use the public HTTP JSON API that gets for now updated once a day (th=
at
>> is, every 24 hours).
>>
>>>
>>>
>>> 2 - Which data is included for a result? (Who scored the goals?)
>>
>>
>>    For now only the results e.g.   Italy 3-0 Spain   etc.
>> . Again see the plain text fixtures files, for an example. Goals scored =
by
>> players will get added later.
>>
>>>
>>> 3 - I don't know where can I find all the possible available URLs for t=
he
>>> web service.
>>
>>
>>    Sorry, the docu page for the web service is currently down [1], it
>> resides @ footballdb.herokuapp.com/api   but the service is working.
>> Example:
>>
>>   - Get the teams for the World Cup 2014 ->
>> footballdb.herokuapp.com/api/v1/event/world.2014/teams
>>   - Get all rounds ->
>> footballdb.herokuapp.com/api/v1/event/world.2014/rounds
>>   - Get 1st round games ->
>> footballdb.herokuapp.com/api/v1/event/world.2014/round/1
>>   - etc.
>>
>>   Cheers.
>>
>> [1] The docu source page for the HTTP JSON API resides @
>> github.com/geraldb/sport.db.ruby/blob/master/lib/sportdb/service/views/i=
ndex.erb
>
> --
> You received this message because you are subscribed to the Google Groups
> "Open Sport(s) Database - football.db, formula1.db, ski.db, and Friends"
> group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to opensport+unsubscribe@googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.

